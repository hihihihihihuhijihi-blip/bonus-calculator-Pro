# 奖金计算器系统测试用例

## 测试环境
- URL: http://localhost:5173
- 测试用户: 张艳

---

## 一、登录功能测试

### TC-001: 用户登录
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 点击姓名输入框 | 显示用户下拉列表 |
| 2 | 选择"张艳" | 登录成功，显示用户信息 |
| 3 | 检查页面显示 | 显示"销售数据录入"页面 |

---

## 二、销售数据录入测试

### TC-002: D段记忆功能
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 默认进入页面 | 显示上次编辑的D段（或D1） |
| 2 | 切换到D3 | 选中D3，显示"D3 数据录入 (5-6月)" |
| 3 | 刷新页面 | 仍显示D3（记忆功能生效） |
| 4 | 切换到D5 | 选中D5 |
| 5 | 退出重新登录张艳 | 自动显示D5 |

### TC-003: D段标题显示
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 查看顶部蓝色标题 | 显示"D段 数据录入" |
| 2 | 查看月份显示 | 正确显示对应月份（D1=1-2月, D2=3-4月等） |
| 3 | 逐个切换D1-D6 | 月份显示正确更新 |

### TC-004: D段完成标记
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 查看D1-D6初始状态 | 全部无对号标记 |
| 2 | 在D1输入任意销售额>0 | D1显示绿色对号 |
| 3 | 将D1数据全改为0 | D1对号消失 |
| 4 | 在多个D段输入数据 | 对应D段显示对号 |
| 5 | 查看进度统计 | "已完成"数字正确更新 |

### TC-005: 置顶固定功能
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 页面滚动到输入框区域 | 头部（标题+进度条+D段信息+选择器）固定在顶部 |
| 2 | 继续向下滚动 | 置顶区域始终可见 |
| 3 | 滚动回顶部 | 头部恢复正常位置 |

### TC-006: 数据自动保存
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 在D1输入销售额1000 | 无需点击保存，自动存储 |
| 2 | 切换到D2 | D1数据保留 |
| 3 | 切回D1 | 输入的1000仍然存在 |
| 4 | 刷新页面 | 数据仍然存在 |

### TC-007: 存量产品输入
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 在D1"吡美莫司"输入1000 | 显示1000元 |
| 2 | 输入小数0.01 | 正确显示0.01 |
| 3 | 输入负数 | 正常处理（或按业务规则） |
| 4 | 清空输入框 | 显示为空（值为0） |

### TC-008: 新产品输入
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 查看新产品区域 | 显示所有新产品 |
| 2 | 输入销售额 | 正确保存和显示 |
| 3 | 切换D段后返回 | 数据保留 |

### TC-009: 跨D段数据独立性
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 在D1输入1000 | D1显示1000 |
| 2 | 切换到D2 | D2不显示D1的数据 |
| 3 | 在D2输入2000 | D2显示2000 |
| 4 | 返回D1 | D1仍显示1000，不受D2影响 |

---

## 三、奖金计算测试

### TC-010: 无数据计算
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 确保所有D段无数据 | 无对号标记 |
| 2 | 点击"开始计算奖金" | 弹出红色Toast："请先输入销售数据" |
| 3 | 等待2秒 | Toast自动消失 |

### TC-011: 部分D段计算
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 仅在D1输入数据 | 只有D1有对号 |
| 2 | 点击"开始计算奖金" | 计算成功，只显示D1结果 |

### TC-012: 全部D段计算
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 在D1-D6都输入测试数据 | 全部有对号标记 |
| 2 | 点击"开始计算奖金" | 显示D1-D6全部结果 |

### TC-013: 达成率计算（存量产品<80%）
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 输入销售额<指标的80% | 达成率<80%，显示红色 |
| 2 | 查看奖金 | 奖金为0（系数为0） |

### TC-014: 达成率计算（存量产品80%-100%）
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 输入销售额为指标的90% | 达成率90%，显示黄色 |
| 2 | 查看奖金 | 奖金=销售额×5%×0.9 |

### TC-015: 达成率计算（存量产品≥100%）
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 输入销售额≥指标 | 达成率≥100%，显示绿色 |
| 2 | 查看奖金 | 奖金=销售额×5%×1.0 |

### TC-016: 增量奖计算（达成率<100%）
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | D1存量达成率<100% | 无增量奖 |
| 2 | 查看D1结果 | 不显示增量奖模块 |

### TC-017: 增量奖计算（达成率≥100%且有增量）
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | D1存量达成率≥100%，吡美莫司超基线 | 显示增量奖 |
| 2 | 查看增量额 | 显示增量额=吡美莫司销售额-基线 |
| 3 | 查看增量奖 | 增量奖=增量额×5% |

### TC-018: 年度返还计算
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 年度存量达成率≥100% | 年度汇总显示返还金额 |
| 2 | 年度存量达成率<100% | 年度返还为0 |

---

## 四、结果展示测试

### TC-019: 结果页面布局
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 计算完成后查看结果 | 显示"计算结果报告"标题 |
| 2 | 查看D段列表 | 按D1-D6顺序排列 |
| 3 | 只显示有数据的D段 | 空D段不显示 |

### TC-020: D段详情展开/折叠
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 点击某D段标题 | 内容展开 |
| 2 | 再次点击 | 内容折叠 |
| 3 | 年度汇总默认状态 | 默认折叠 |

### TC-021: 存量产品/新产品分组显示
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 查看有数据的D段详情 | 显示"存量产品"和"新产品"分组 |
| 2 | 查看销售额 | 正确显示输入值 |
| 3 | 查看指标额 | 正确显示系统配置值 |
| 4 | 查看达成率 | 计算正确，颜色正确 |
| 5 | 查看进度条 | 视觉呈现达成率 |

### TC-022: 年度汇总统计
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 展开年度汇总 | 显示存量达成和新品达成 |
| 2 | 查看达成率 | 等于全年销售额/全年指标 |
| 3 | 查看奖金明细 | 存量产品奖金、新产品奖金、增量奖、年度返还 |
| 4 | 查看总奖金 | =存量奖金+新品奖金+增量奖+年度返还 |

### TC-023: 返回修改功能
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 点击"返回修改" | 返回销售数据录入页面 |
| 2 | 修改数据后重新计算 | 结果正确更新 |

---

## 五、边界条件测试

### TC-024: 极大数值输入
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 输入超大销售额 | 正常处理和计算 |

### TC-025: 特殊用户（陈凤勤）
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 尝试登录陈凤勤 | 提示不参与奖金计算 |

### TC-026: 特殊用户（安爽）
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 登录安爽 | 正常计算 |
| 2 | 查看片区 | 显示"重庆+四川" |

### TC-027: 河北/江苏片区他克莫司
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 登录河北片区用户 | 他克莫司不参与计算 |
| 2 | 输入他克莫司销售额 | 计算时不计入 |

---

## 六、数据持久化测试

### TC-028: LocalStorage存储
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 输入数据 | 保存到localStorage |
| 2 | 关闭浏览器重新打开 | 数据仍然存在 |
| 3 | 清除浏览器数据 | 数据清空 |

### TC-029: 多用户数据隔离
| 步骤 | 操作 | 预期结果 |
|------|------|----------|
| 1 | 登录张艳输入数据 | 只存储张艳数据 |
| 2 | 登录另一用户 | 数据不混淆 |
| 3 | 返回张艳 | 原数据保留 |

---

## 测试数据示例（张艳）

### D1测试数据
| 产品 | 销售额 |
|------|--------|
| 吡美莫司 | 50000 |
| 金纽尔 | 30000 |
| 他克莫司 | 20000 |

### D2测试数据（超指标）
| 产品 | 销售额 |
|------|--------|
| 吡美莫司 | 80000 |
| 金纽尔 | 50000 |

### 预期计算验证
- D1存量达成率 = 销售额 / 指标额
- D1存量奖金 = D1销售额 × 5% × 达成系数
- 增量奖 = max(0, 吡美莫司销售额 - 基线) × 5%（仅当存量达成≥100%）
